{% extends 'base.html' %}

{% load static %}
{% block title %}الرئيسية{% endblock %}

{% block content %}
<style>
    main {
        width: 100%;
        margin: 0px;
        padding: 0;
        position: relative;
        margin-bottom: 40px;
        margin-top: 20px;
        height: 750px;
    }

    #carousel {
        position: relative;
        height: 732px;
        top: 50%;
        transform: translateY(-50%);
        overflow: hidden;
    }

    #carousel div {
        position: absolute;
        transition: transform 400ms, left 400ms, opacity 400ms, z-index 0s;
        opacity: 1;
    }

    #carousel div img {
        width: auto;
        height: 90%;
        /*  max-height: 90%;
        min-height: 90%;*/
        transition: width 400ms;
        -webkit-user-drag: none;
        border-top-right-radius: 10px;
        border-top-left-radius: 10px;
        display: block;
    }

    #carousel .hideLeft .silder-moving,
    #carousel .prevLeftSecond .silder-moving,
    #carousel .prev .silder-moving {
        text-align: left;
        direction: ltr;
        left: 10px;
        /* تأكد من وجود مسافة كافية */
        right: auto;
    }

    #carousel div.hideLeft {
        left: 0%;
        opacity: 0;
        transform: translateY(50%) translateX(-50%);
    }

    #carousel div.hideLeft img {
        width: 200px;
        height: 200px;
    }

    #carousel div.hideRight {
        left: 100%;
        opacity: 0;
        transform: translateY(50%) translateX(-50%);
    }

    #carousel div.hideRight img {
        width: 200px;
    }

    #carousel div.prev {
        z-index: 5;
        left: 30%;
        transform: translateY(50px) translateX(-50%);
        opacity: 0.7;
    }

    #carousel img:hover {
        cursor: default;
    }

    #carousel div.prev img {
        width: 300px;
        height: 300px;
    }

    #carousel div.prevLeftSecond {
        z-index: 4;
        left: 15%;
        transform: translateY(50%) translateX(-50%);
        opacity: 0.2;
    }

    #carousel div.prevLeftSecond img {
        width: 200px;
        height: 200px;
    }

    #carousel div.selected {
        z-index: 10;
        left: 50%;
        transform: translateY(0px) translateX(-50%);
        height: 100%;
    }

    #carousel div.next {
        z-index: 5;
        left: 70%;
        transform: translateY(50px) translateX(-50%);
        opacity: 0.7;
    }

    .carousel img {
        cursor: pointer !important;
    }

    #carousel div.next img {
        width: 300px;
        height: 300px;
    }

    #carousel .silder-moving {
        background-color: white;
        padding: 10px;
        min-width: 500px;
        /* max-width: 500px; */
        box-sizing: border-box;
        border-bottom-right-radius: 10px;
        border-bottom-left-radius: 10px;
        font-family: 'CodecProRegular';
        width: 658px;
    }

    #carousel .silder-moving span {
        color: #777777;
        font-size: 14px;
    }

    #carousel .silder-moving p {
        color: #333333;
        font-size: 16px;
        font-family: 'CodecProBold';
    }

    #carousel div.nextRightSecond {
        z-index: 4;
        left: 85%;
        transform: translateY(50%) translateX(-50%);
        opacity: 0.2;
    }

    #carousel div.nextRightSecond img {
        width: 200px;
    }

    .arrow-silder {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2rem;
        color: white;
        background-color: rgba(0, 0, 0, 0.33);
        padding: 10px 20px;
        border-radius: 50%;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s;
    }

    .arrow-silder:hover {
        background-color: rgba(0, 0, 0, 0.8);
    }

    .left-arrow-silder {
        left: 30%;
    }

    .right-arrow-silder {
        right: 30%;
    }

    .carousel-dots {
        display: flex;
        justify-content: center;
        position: relative;
        top: 20px;
        transform: scale(1);
        flex-direction: row-reverse; /* يجعل الترتيب من اليمين إلى اليسار */
    }

    .carousel-dots div {
        width: 10px;
        height: 10px;
        background-color: rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
        transition: 
            background-color 0.3s ease,
            width 0.3s ease,
            height 0.3s ease,
            border-radius 0.3s ease,
            transform 0.3s ease; /* للتحكم في التكبير */
    }
    
    .carousel-dots div:hover {
        background-color: rgba(0, 0, 0, 0.6);
        width: 18px;
        height: 10px;
        border-radius: 5px;
        transform: scale(1.2);
    }
    
    .carousel-dots div.active {
        background-color: rgba(0, 0, 0, 0.9);
        transform: scale(1.4);
        width: 20px;
        height: 10px;
        border-radius: 4px;
    }
    

    @media (max-width: 574px) {
        main {
            display: none;
        }

        .publications.carousel-title {
            display: none;
        }
    }

    @media (min-width: 575px) {
        main {
            display: none;
        }

        .publications.carousel-title {
            display: none;
        }
    }

    @media (min-width: 768px) {
        #carousel {
            height: 700px;
        }

        #carousel div img {
            height: 80%;
            width: auto;
        }

        .container.index-articles.hide-in-pc {
            display: none;
        }

        main {
            display: block;
        }

        .publications.carousel-title {
            display: block;
        }

        #carousel .silder-moving {
            width: 562px;
        }

        .carousel-dots {
            top: 0;
        }

        #carousel .silder-moving span {
            font-size: 13px;
        }

        #carousel .silder-moving p {
            font-size: 15px;
        }

        .right-arrow-silder {
            right: 24%;
        }

        .left-arrow-silder {
            left: 24%;
        }

        main {
            margin-bottom: -33px;
        }
    }

    @media (min-width: 992px) {
        #carousel {
            height: 732px;
        }

        .container.index-articles.hide-in-pc {
            display: none;
        }

        main {
            display: block;
        }

        .publications.carousel-title {
            display: block;
        }

        #carousel div img {
            width: auto;
            height: 90%;
        }

        #carousel .silder-moving {
            width: 658px;
            padding-bottom: 10px;
        }

        .carousel-dots {
            top: 35px;
        }

        #carousel .silder-moving span {
            font-size: 14px;
        }

        #carousel .silder-moving p {
            font-size: 16px;
        }

        .right-arrow-silder {
            right: 30%;
        }

        .left-arrow-silder {
            left: 30%;
        }

        main {
            margin-bottom: 40px;
        }
    }
</style>
<div class="container spe-show">
    <div class="slider">
        <div class="slides">
            <input type="radio" name="radio-btn" id="radio1">
            <input type="radio" name="radio-btn" id="radio2">
            <input type="radio" name="radio-btn" id="radio3">
            <input type="radio" name="radio-btn" id="radio4">
            <input type="radio" name="radio-btn" id="radio5">
            <div class="slide first">
                <img src="{% static 'imgs/agstate.webp' %}" alt="">
                <!-- <h2>سياسة الإصلاح والإنفتاح في الصين</h2> -->
                <a href="{% url 'the_existing_social_situation' %}">
                    <div class="slide-full-inf">
                        <h2>أهم ملامح الوضع الاجتماعي القائم في اليمن</h2>
                        <span><span style="display: inline;">24 </span>فبراير 2024
                        </span>
                    </div>
                </a>
            </div>
            <div class="slide">
                <img src="{% static 'imgs/y.png' %}" alt="">
                <a href="{% url 'financial_reform_in_yemen' %}">
                    <div class="slide-full-inf">
                        <h2>برامج الإصلاح المالي في الجمهورية اليمنية</h2>
                        <span><span style="display: inline;">13 </span>يناير 2024
                        </span>
                    </div>
                </a>
            </div>

            <div class="slide">

                <img src="{% static 'imgs/raw.webp' %}" alt="">
                <!-- <h2>مراحل عملية الإصلاح التشريعي</h2> -->
                <a href="{% url 'rwanda_study' %}">
                    <div class="slide-full-inf">
                        <h2>تجربة رواندا في الإصلاح الإداري</h2>
                        <span><span style="display: inline;">4 </span>مايو 2024
                        </span>
                    </div>
                </a>
            </div>
            <div class="slide">

                <img src="{% static 'imgs/teg.jpg' %}" alt="">
                <!-- <h2>مدخل إلى الحكومة الإلكترونية</h2> -->
                <a href="{% url 'information_and_communications_technology_in_Yemen' %}">
                    <div class="slide-full-inf special-move">
                        <h2>البنية الأساسية لتكنولوجيا المعلومات والاتصالات في اليمن</h2>
                        <span><span style="display: inline;">28 </span>أكتوبر 2023
                        </span>
                    </div>
                </a>
            </div>
            <div class="slide journalImage">
                <img src="{% static 'imgs/New_Slider.png' %}" alt="">
                <a href="{% url 'osus' %}">
                    <div class="slide-full-inf">
                        <h2>دورية أُســـس</h2>
                        <span><span style="display: inline;">8 </span>مارس 2025
                        </span>
                    </div>
                </a>
            </div>
            <div class="navigation-auto">
                <div class="auto-btn1"></div>
                <div class="auto-btn2"></div>
                <div class="auto-btn3"></div>
                <div class="auto-btn4"></div>
                <div class="auto-btn5"></div>
            </div>
        </div>
        <div class="navigation-manual">
            <label for="radio1" class="manual-btn"></label>
            <label for="radio2" class="manual-btn"></label>
            <label for="radio3" class="manual-btn"></label>
            <label for="radio4" class="manual-btn"></label>
            <label for="radio5" class="manual-btn"></label>
        </div>
    </div>
</div>
<div class="container index-articles all-art">
    <a href="{% url 'studies' %}">
        <h1 class="spe-h1 studies">دراسات وبحوث</h1>
    </a>
    <div class="show-studies-index">
        <div class="show-index-imgs">
            <div class="card">
                <a href="{% url 'firstpage' %}">
                    <img src="{% static 'imgs/manage1.webp' %}" alt="">
                </a>
                <a href="{% url 'firstpage' %}">
                    <div class="text-info-index">
                        <span>2 مارس 2024</span>
                        <p>نشأة الإدارة وتطورها</p>
                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'administrativereform' %}">
                    <img src="{% static 'imgs/repair.jpg' %}" alt="">
                </a>
                <a href="{% url 'administrativereform' %}">
                    <div class="text-info-index">
                        <span>16 مارس 2024</span>
                        <p>الإصلاح الإداري المفهوم والأهداف</p>

                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'reformmethodology' %}">
                    <img src="{% static 'imgs/method1.jpg' %}" alt="">
                </a>
                <a href="{% url 'reformmethodology' %}">
                    <div class="text-info-index">
                        <span>23 مارس 2024</span>
                        <p>منهجية الإصلاح الإداري</p>

                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'legislative_reform_in_the_world' %}">
                    <img src="{% static 'imgs/repair4.jpg' %}" alt="" class="stud">
                </a>
                <a href="{% url 'legislative_reform_in_the_world' %}">
                    <div class="text-info-index">
                        <span>2 نوفمبر 2024</span>
                        <p>تجارب عربية وغربية للإصلاح التشريعي</p>
                    </div>
                </a>
            </div>

            <div class="card">
                <a href="{% url 'studysingapore' %}">
                    <img src="{% static 'imgs/sn.webp' %}" alt="" class="stud">
                </a>
                <a href="{% url 'studysingapore' %}">
                    <div class="text-info-index">
                        <span>27 أبريل 2024</span>
                        <p>تجربة سنغافورا في الإصلاح الإداري</p>

                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'rwanda_study' %}">
                    <img src="{% static 'imgs/raw.webp' %}" alt="" class="stud">
                </a>
                <a href="{% url 'rwanda_study' %}">
                    <div class="text-info-index">
                        <span>4 مايو 2024</span>
                        <p>تجربة رواندا في الإصلاح الإداري</p>
                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'studyOfUS' %}">
                    <img src="{% static 'imgs/US.jpg' %}" alt="" class="stud">
                </a>
                <a href="{% url 'studyOfUS' %}">
                    <div class="text-info-index">
                        <span>13 أبريل 2024</span>
                        <p>تجربة الولايات المتحدة الأمريكية في الإصلاح الإداري</p>

                    </div>
                </a>
            </div>
            <div class="card">
                <a href="{% url 'jor_study' %}">
                    <img src="{% static 'imgs/jor.jpeg' %}" alt="" class="stud">
                </a>
                <a href="{% url 'jor_study' %}">
                    <div class="text-info-index">
                        <span>15 يونيو 2024</span>
                        <p>تجربة المملكة الأردنية الهاشيمة في الإصلاح الإداري</p>
                    </div>
                </a>
            </div>

        </div>
        <a href="{% url 'studies' %}" class="show-all">عرض المزيد</a>
    </div>
</div>
<div class="container index-articles">
    <a href="{% url 'publications' %}">
        <h1 class="publications in-index with-out">إصدارات المركز</h1>
    </a>
</div>
<div class="outside-container">
    <div class="container index-articles">
        <h1 class="publications in-index" style="display: none;">إصدارات المركز</h1>
        <div class="tow-books publications-all">
            <div class="daw">
                <h1 class="spe-h1 index-journals">الدوريات</h1>
                <a href="{% url 'osus' %}">
                    <div class="card">
                        <img src="{% static 'imgs/new_osus.jpg' %}" alt="">
                        <div class="daw-info">
                            <span class="book-span">العدد الأول | مارس 2025</span>
                            <p>دورية أُســـس</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="daw">
                <h1 class="spe-h1 index-book">الكتب</h1>
                <a href="{% url 'books' %}">
                    <div class="card">
                        <img src="{% static 'imgs/new_book.jpg' %}" alt="">
                        <div class="daw-info">
                            <span class="book-span">مجموعة مؤلفين | ديسمبر 2023</span>
                            <p>رؤية مستقبلية للإصلاح الإداري الشامل في اليمن 2023</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>
<div class="container index-articles hide-in-pc">
    <div class="tow-books">
        <div class="daw">
            <a href="{% url 'infographs' %}">
                <h1 class="spe-h1 infograph">أسس إنفوجراف</h1>
            </a>
            <div class="card">
                <div class="infogr">
                    <button class="prev" aria-label="السابق">&lt;</button>
                    <a
                        href="{% url 'infograph_detail' 'The-seven-largest-pharmaceutical-producing-countries-in-2024' %}">
                        <img src="{% static 'imgs/Info-01.png' %}" alt="إنفوجراف">
                    </a>
                    <button class="next" aria-label="التالي">&gt;</button>
                </div>
                <div class="daw-info">
                    <span class="book-span pod-info-index-date">11 مارس 2025</span>
                    <p class="pod-info-index">أكثر سبع دول إنتاجاً للأدوية في العام 2024</p>
                </div>
            </div>
        </div>
    </div>
    <!-- <a href="{% url 'infographs' %}" class="show-all infograph">عرض المزيد</a> -->

</div>
<div class="container"><a href="{% url 'infographs' %}">
        <h1 class="publications in-index carousel-title">أسس إنفوجراف</h1>
    </a></div>
<main>
    <div id="carousel" class="carousel">
        <div id='item_1' class="hideLeft">
            <a href="{% url 'infograph_detail' 'Top-10-migrant-exporting-countries-in-2023' %}">
                <img src="{% static 'imgs/Info-08.png' %}" alt="إنفوجراف">
                <div class="silder-moving daw-info">
                    <span> 30 أبريل 2025 </span>
                    <p> أكثر عشر دول تصديرًا للمهاجرين في 2023</p>
                </div>
            </a>
        </div>

        <div id='item_2' class="hideLeft">
            <a href="{% url 'infograph_detail' 'The-seven-largest-pharmaceutical-producing-countries-in-2024' %}">
                <img src="{% static 'imgs/Info-01.png' %}" alt="إنفوجراف">
                <div class="silder-moving daw-info">
                    <span> 11 مارس 2025 </span>
                    <p>أكثر سبع دول إنتاجًا للأدوية في العام 2024</p>
                </div>
            </a>
        </div>

        <div id='item_3' class="hideLeft">
            <a href="{% url 'infograph_detail' 'Top-ten-countries-with-the-largest-uranium-reserves' %}">
                <img src="{% static 'imgs/Info-02.png' %}" alt="image info">
                <div class="silder-moving">
                    <span> 13 مارس 2025 </span>
                    <p>أكبر عشر دول في احتياطي اليورانيوم</p>
                </div>
            </a>
        </div>

        <div id='item_4' class="hideLeft">
            <a href="{% url 'infograph_detail' 'Government-ministries-and-the-big-five-economies' %}">
                <img src="{% static 'imgs/Info-03.png' %}" alt="image info">
                <div class="silder-moving">
                    <span> 15 مارس 2025 </span>
                    <p>الوزارات الحكومية والاقتصادات الخمس الكبرى</p>
                </div>
            </a>
        </div>

        <div id='item_5' class="hideLeft">
            <a href="{% url 'infograph_detail' 'Unemployment-in-Arab-countries' %}">
                <img src="{% static 'imgs/Info-04.png' %}" alt="image info">
                <div class="silder-moving">
                    <span> 17 مارس 2025 </span>
                    <p>البطالة في الدول العربية</p>
                </div>
            </a>
        </div>

        <div id='item_6' class="hideLeft">
            <a href="{% url 'infograph_detail' 'How-education-affects-the-economy' %}">
                <img src="{% static 'imgs/Info-05.png' %}" alt="image info">
                <div class="silder-moving">
                    <span> 19 مارس 2025 </span>
                    <p>كيف يؤثر التعليم على الاقتصاد</p>
                </div>
            </a>
        </div>

        <div id='item_7' class="hideLeft">
            <a href="{% url 'infograph_detail' 'Private-sector-contribution-to-GDP-2023' %}">
                <img src="{% static 'imgs/Info-06.png' %}">
                <div class="silder-moving">
                    <span> 21 مارس 2025 </span>
                    <p>مساهمة القطاع الخاص في الناتج المحلي الإجمالي 2023</p>
                </div>
            </a>
        </div>

        <div id='item_8' class="prevLeftSecond" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'Cotton-kings-2023' %}">
                <img src="{% static 'imgs/Info-07.png' %}">
                <div class="silder-moving">
                    <span> 23 مارس 2025 </span>
                    <p>ملوك القطن...أكبر عشر دول منتجة للقطن في العالم 2023</p>
                </div>
            </a>
        </div>

        <div id='item_9' class="prev" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'Taxes-and-companies' %}">
                <img src="{% static 'imgs/Info-09.png' %}">
                <div class="silder-moving">
                    <span> 25 مارس 2025 </span>
                    <p>الضرائب والشركات</p>
                </div>
            </a>
        </div>
        <div id='item_10' class="selected" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'higher-education-in-the-Arab-World' %}">
                <img src="{% static 'imgs/Info-10.png' %}">
                <div class="silder-moving">
                    <span> 27 مارس 2025</span>
                    <p>التعليم العالي في العالم العربي</p>
                </div>
            </a>
        </div>
        <div id='item_11' class="next" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'health-care-in-yemen' %}">
                <img src="{% static 'imgs/Info-11.png' %}">
                <div class="silder-moving">
                    <span> 29 مارس 2025</span>
                    <p>القطاع الصحي في اليمن</p>
                </div>
            </a>
        </div>
        <div id='item_12' class="nextRightSecond" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'the-spread-of-epidemics' %}">
                <img src="{% static 'imgs/Info-12.png' %}">
                <div class="silder-moving">
                    <span> 3 أبريل 2025</span>
                    <p>انتشار الأوبئة</p>
                </div>
            </a>
        </div>
        <div id='item_13' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'top-ten-Social-care-Systems' %}">
                <img src="{% static 'imgs/Info-13.png' %}">
                <div class="silder-moving">
                    <span> 7 أبريل 2025</span>
                    <p>أكبر عشر أنظمة رعاية اجتماعية</p>
                </div>
            </a>
        </div>
        <div id='item_14' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'largest-healthcare-systems' %}">
                <img src="{% static 'imgs/Info-14.png' %}">
                <div class="silder-moving">
                    <span> 9 أبريل 2025</span>
                    <p>أكبر أنظمة رعاية صحية</p>
                </div>
            </a>
        </div>
        <div id='item_15' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'the-brain-drain-of-the-Arab-world' %}">
                <img src="{% static 'imgs/Info-15.png' %}">
                <div class="silder-moving">
                    <span> 17 أبريل 2025</span>
                    <p>هجرة العقول العربية</p>
                </div>
            </a>
        </div>
        <div id='item_16' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'the-largest-armies' %}">
                <img src="{% static 'imgs/Info-16.png' %}">
                <div class="silder-moving">
                    <span> 19 أبريل 2025</span>
                    <p>الجيوش الأكبر</p>
                </div>
            </a>
        </div>
        <div id='item_17' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'top-ten-countries-with-the-highest-teacher-density' %}">
                <img src="{% static 'imgs/Info-17.png' %}">
                <div class="silder-moving">
                    <span> 20 أبريل 2025</span>
                    <p>أكثر عشر دول في كثافة المعلّمين</p>
                </div>
            </a>
        </div>
        <div id='item_18' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'top-ten-countries-with-the-most-doctors' %}">
                <img src="{% static 'imgs/Info-18.png' %}">
                <div class="silder-moving">
                    <span> 23 أبريل 2025</span>
                    <p>أكثر عشر دول في كثافة الأطباء</p>
                </div>
            </a>
        </div>
        <div id='item_19' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'water-and-Arab-countries' %}">
                <img src="{% static 'imgs/Info-19.png' %}">
                <div class="silder-moving">
                    <span> 27 أبريل 2025</span>
                    <p>المياه والدول العربية</p>
                </div>
            </a>
        </div>
        <div id='item_20' class="hideRight" alt="إنفوجراف">
            <a href="{% url 'infograph_detail' 'top-ten-Arab-countries-sending-migrant-remittances-2024' %}">
                <img src="{% static 'imgs/Info-20.png' %}">
                <div class="silder-moving">
                    <span> 29 أبريل 2025</span>
                    <p>أكبر عشر دول عربية إصدارًا لتحويلات المهاجرين 2024</p>
                </div>
            </a>
        </div>
    </div>
    <div id="carousel-dots" class="carousel-dots"></div>
    <div class="all-rows">
        <div class="arrow-silder left-arrow-silder" id="prev">&larr;</div>
        <div class="arrow-silder right-arrow-silder" id="next">&rarr;</div>
    </div>
</main>
<div class="container index-articles">
    <div class="tow-books">
        <div class="daw">
            <h1 class="spe-h1 pod">داخل الصندوق بودكاست</h1>
            <div class="card pod">
                <img src="{% static 'imgs/PODCAST adv-01.png' %}" alt="">
                <div class="daw-info">
                    <p>قريباً | سلسلة حلقات من إنتاج المركز التأسيسي للدراسات والبحوث تقدم رؤى فاعلة وتجارب إدارية ناجحة
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container index-articles-pod">
    <img src="{% static 'imgs/PODCAST adv 2-01.png' %}" alt="">
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        let intervalTime = 10000; // وقت البداية بين الانتقالات

        function startSlider() {
            counter = 5; // التأكد من البدء من الصورة الأولى
            document.getElementById('radio' + counter).checked = true;

            setTimeout(function sliderTransition() {
                counter--;
                if (counter == 0) {
                    counter = 5; // العودة إلى الصورة الأولى بعد الصورة الأخيرة
                }
                document.getElementById('radio' + counter).checked = true;

                // ضبط الانتقال التالي بنفس الوقت الثابت                
                setTimeout(sliderTransition, intervalTime);
            }, intervalTime);
        }

        // التأكد من تشغيل السلايدر عند تحميل الصفحة        
        window.onload = startSlider;

        const slidess = [
            {
                image: "{% static 'imgs/Info-01.png' %}",
                text: "أكثر سبع دول إنتاجاً للأدوية في العام 2024",
                date: "11 مارس 2025",
                slug: 'The-seven-largest-pharmaceutical-producing-countries-in-2024'
            },
            {
                image: "{% static 'imgs/Info-02.png' %}",
                text: "أكبر عشر دول في احتياطي اليورانيوم",
                date: "13 مارس 2025",
                slug: 'Top-ten-countries-with-the-largest-uranium-reserves',
            },
            {
                image: "{% static 'imgs/Info-03.png' %}",
                text: "الوزارات الحكومية والاقتصادات الخمس الكبرى",
                date: "15 مارس 2025",
                slug: 'Government-ministries-and-the-big-five-economies'
            },
            {
                image: "{% static 'imgs/Info-04.png' %}",
                text: "البطالة في الدول العربية",
                date: "17 مارس 2025",
                slug: 'Unemployment-in-Arab-countries'
            },
            {
                image: "{% static 'imgs/Info-05.png' %}",
                text: "كيف يؤثر التعليم على الاقتصاد",
                date: "19 مارس 2025",
                slug: 'How-education-affects-the-economy'
            },
            {
                image: "{% static 'imgs/Info-06.png' %}",
                text: "مساهمة القطاع الخاص في الناتج المحلي الإجمالي 2023",
                date: "21 مارس 2025",
                slug: 'Private-sector-contribution-to-GDP-2023'
            },
            {
                image: "{% static 'imgs/Info-07.png' %}",
                text: "ملوك القطن...أكبر عشر دول منتجة للقطن في العالم 2023",
                date: "23 مارس 2025",
                slug: 'Cotton-kings-2023'
            },
            {
                image: "{% static 'imgs/Info-08.png' %}",
                text: "أكثر عشر دول تصديرًا للمهاجرين في 2023",
                date: "30 أبريل 2025",
                slug: 'Top-10-migrant-exporting-countries-in-2023'
            },
            {
                image: "{% static 'imgs/Info-09.png' %}",
                text: "الضرائب والشركات",
                date: "25 مارس 2025",
                slug: 'Taxes-and-companies'
            },
            {
                image: "{% static 'imgs/Info-10.png' %}",
                text: "التعليم العالي في العالم العربي",
                date: "27 مارس 2025",
                slug: 'higher-education-in-the-Arab-World'
            },
            {
                image: "{% static 'imgs/Info-11.png' %}",
                text: "القطاع الصحي في اليمن",
                date: "29 مارس 2025",
                slug: 'health-care-in-yemen'
            },
            {
                image: "{% static 'imgs/Info-12.png' %}",
                text: "انتشار الأوبئة",
                date: "3 أبريل 2025",
                slug: 'the-spread-of-epidemics'
            },
            {
                image: "{% static 'imgs/Info-13.png' %}",
                text: "أكبر عشر أنظمة رعاية اجتماعية",
                date: "7 أبريل 2025",
                slug: 'top-ten-Social-care-Systems'
            },
            {
                image: "{% static 'imgs/Info-14.png' %}",
                text: "أكبر أنظمة رعاية صحية",
                date: "9 أبريل 2025",
                slug: 'largest-healthcare-systems'
            },
            {
                image: "{% static 'imgs/Info-15.png' %}",
                text: "هجرة العقول العربية",
                date: "17 أبريل 2025",
                slug: 'the-brain-drain-of-the-Arab-world'
            },
            {
                image: "{% static 'imgs/Info-16.png' %}",
                text: "الجيوش الأكبر",
                date: "19 أبريل 2025",
                slug: 'the-largest-armies'
            },
            {
                image: "{% static 'imgs/Info-17.png' %}",
                text: "أكثر عشر دول في كثافة المعلّمين",
                date: "20 أبريل 2025",
                slug: 'top-ten-countries-with-the-highest-teacher-density'
            },
            {
                image: "{% static 'imgs/Info-18.png' %}",
                text: "أكثر عشر دول في كثافة الأطباء",
                date: "23 أبريل 2025",
                slug: 'top-ten-countries-with-the-most-doctors'
            },
            {
                image: "{% static 'imgs/Info-19.png' %}",
                text: "المياه والدول العربية",
                date: "27 أبريل 2025",
                slug: 'water-and-Arab-countries'
            },
            {
                image: "{% static 'imgs/Info-20.png' %}",
                text: "أكبر عشر دول عربية إصدارًا لتحويلات المهاجرين 2024",
                date: "29 أبريل 2025",
                slug: 'top-ten-Arab-countries-sending-migrant-remittances-2024'
            },

        ];

        let currentIndex = 0;
        const imgElement = document.querySelector(".infogr img");
        const textElement = document.querySelector(".pod-info-index");
        const textdateElement = document.querySelector(".pod-info-index-date");
        const prevButton = document.querySelector(".infogr .prev");
        const nextButton = document.querySelector(".infogr .next");
        const linkElement = document.querySelector(".infogr a"); // أضفنا هذا السطر

        // تحديث الصورة
        // تحديث الصورة والنص معًا
        function updateSlide(index) {
            imgElement.style.opacity = 0;
            textElement.style.opacity = 0;

            setTimeout(() => {
                imgElement.src = slidess[index].image;
                textElement.textContent = slidess[index].text;
                linkElement.href = `infograph/${slidess[index].slug}/`; // عدل الرابط هنا ✅
                textdateElement.textContent = slidess[index].date;
                imgElement.style.opacity = 1;
                textElement.style.opacity = 1;
            }, 0);
        }

        // أزرار التبديل اليدوي
        // أزرار التبديل اليدوي - تعديل فقط الأزرار
        prevButton.addEventListener("click", () => {
            currentIndex = (currentIndex - 1 + slidess.length) % slidess.length;
            updateSlide(currentIndex); // تم تعديل الاسم
        });

        nextButton.addEventListener("click", () => {
            currentIndex = (currentIndex + 1) % slidess.length; // تعديل المصفوفة
            updateSlide(currentIndex); // تم تعديل الاسم
        });

        if (window.innerWidth <= 1200) {
            document.querySelector('.slide.journalImage img').src = "{% static 'imgs/New_Slider_mobile.png' %}";
        }
        const $ = str => document.querySelector(str);
        const $$ = str => document.querySelectorAll(str);

        (function () {
            if (!window.app) {
                window.app = {};
            }
            app.carousel = {
                removeClass: function (el, classname = '') {
                    if (el) {
                        if (classname === '') {
                            el.className = '';
                        } else {
                            el.classList.remove(classname);
                        }
                        return el;
                    }
                    return;
                },
                reorder: function () {
                    let childcnt = $("#carousel").children.length;
                    let childs = $("#carousel").children;

                    for (let j = 0; j < childcnt; j++) {
                        childs[j].dataset.pos = j;
                    }
                },
                move: function (el) {
                    let selected = el;
                    if (typeof el === "string") {
                        console.log(`got string: ${el}`);
                        selected = (el == "next") ? $(".selected").nextElementSibling : $(".selected").previousElementSibling;
                        console.dir(selected);
                    }
                    let curpos = parseInt(app.selected.dataset.pos);
                    let tgtpos = parseInt(selected.dataset.pos);
                    let cnt = curpos - tgtpos;
                    let dir = (cnt < 0) ? -1 : 1;
                    let shift = Math.abs(cnt);
                    for (let i = 0; i < shift; i++) {
                        let el = (dir == -1) ? $("#carousel").firstElementChild : $("#carousel").lastElementChild;
                        if (dir == -1) {
                            el.dataset.pos = $("#carousel").children.length;
                            $('#carousel').append(el);
                        } else {
                            el.dataset.pos = 0;
                            $('#carousel').prepend(el);
                        }
                        app.carousel.reorder();
                    }
                    app.selected = selected;
                    let next = selected.nextElementSibling;
                    var prev = selected.previousElementSibling;
                    var prevSecond = prev ? prev.previousElementSibling : selected.parentElement.lastElementChild;
                    var nextSecond = next ? next.nextElementSibling : selected.parentElement.firstElementChild;
                    selected.className = '';
                    selected.classList.add("selected");
                    app.carousel.removeClass(prev).classList.add('prev');
                    app.carousel.removeClass(next).classList.add('next');
                    app.carousel.removeClass(nextSecond).classList.add("nextRightSecond");
                    app.carousel.removeClass(prevSecond).classList.add("prevLeftSecond");
                    app.carousel.nextAll(nextSecond).forEach(item => { item.className = ''; item.classList.add('hideRight') });
                    app.carousel.prevAll(prevSecond).forEach(item => { item.className = ''; item.classList.add('hideLeft') });

                    // تحديث النقاط بعد التنقل
                    app.carousel.updateDots();

                },
                nextAll: function (el) {
                    let els = [];

                    if (el) {
                        while (el = el.nextElementSibling) { els.push(el); }
                    }

                    return els;

                },
                prevAll: function (el) {
                    let els = [];

                    if (el) {
                        while (el = el.previousElementSibling) { els.push(el); }
                    }


                    return els;
                },
                keypress: function (e) {
                    switch (e.which) {
                        case 37: // left
                            app.carousel.move('prev');
                            break;

                        case 39: // right
                            app.carousel.move('next');
                            break;

                        default:
                            return;
                    }
                    e.preventDefault();
                    return false;
                },
                select: function (e) {
                    console.log(`select: ${e}`);
                    let tgt = e.target;
                    while (!tgt.parentElement.classList.contains('carousel')) {
                        tgt = tgt.parentElement;
                    }

                    app.carousel.move(tgt);

                },
                previous: function (e) {
                    app.carousel.move('prev');
                },
                next: function (e) {
                    app.carousel.move('next');
                },
                doDown: function (e) {
                    console.log(`down: ${e.x}`);
                    app.carousel.state.downX = e.x;
                },
                doUp: function (e) {
                    console.log(`up: ${e.x}`);
                    let direction = 0,
                        velocity = 0;

                    if (app.carousel.state.downX) {
                        direction = (app.carousel.state.downX > e.x) ? -1 : 1;
                        velocity = app.carousel.state.downX - e.x;

                        if (Math.abs(app.carousel.state.downX - e.x) < 10) {
                            app.carousel.select(e);
                            return false;
                        }
                        if (direction === -1) {
                            app.carousel.move('next');
                        } else {
                            app.carousel.move('prev');
                        }
                        app.carousel.state.downX = 0;
                    }
                },
                init: function () {
                    document.addEventListener("keydown", app.carousel.keypress);
                    // $('#carousel').addEventListener("click", app.carousel.select, true);
                    $("#carousel").addEventListener("mousedown", app.carousel.doDown);
                    $("#carousel").addEventListener("touchstart", app.carousel.doDown);
                    $("#carousel").addEventListener("mouseup", app.carousel.doUp);
                    $("#carousel").addEventListener("touchend", app.carousel.doup);

                    app.carousel.reorder();
                    $('#prev').addEventListener("click", app.carousel.previous);
                    $('#next').addEventListener("click", app.carousel.next);

                    // إنشاء النقاط
                    app.carousel.createDots();

                    app.selected = $(".selected");

                },
                state: {}

            }

            // إنشاء النقاط
            app.carousel.createDots = function () {
                const dotsContainer = $("#carousel-dots");
                dotsContainer.innerHTML = ""; // مسح النقاط القديمة

                const images = $$("#carousel > div"); // جميع الصور في شريط التمرير
                images.forEach((_, index) => {
                    const dot = document.createElement("div");
                    dot.dataset.index = index; // تخزين فهرس الصورة
                    dotsContainer.appendChild(dot);
                });

                app.carousel.updateDots(); // تحديث النقطة المحددة
            };

            // تحديث النقاط
            app.carousel.updateDots = function () {
                const selectedImage = $(".selected"); // الحصول على الصورة المحددة حاليًا
                const selectedId = selectedImage ? selectedImage.id : null; // الحصول على ID الصورة المحددة

                const dots = $$("#carousel-dots div"); // الحصول على جميع النقاط
                dots.forEach(dot => {
                    const dotIndex = parseInt(dot.dataset.index); // الحصول على فهرس النقطة
                    const elementId = `item_${dotIndex + 1}`; // حساب ID العنصر المرتبط بالنقطة
                    dot.classList.toggle("active", elementId === selectedId); // تحديث حالة النقطة
                });
            };

            // التعامل مع النقر على النقاط
            app.carousel.dotClick = function (e) {
                const targetIndex = parseInt(e.target.dataset.index);
                const targetId = `item_${targetIndex + 1}`; // العنصر المستهدف
            
                const selectedImage = $(".selected");
                const currentIndex = parseInt(selectedImage.id.split("_")[1]) - 1;
                
                console.log(`current: ${currentIndex} target: ${selectedImage.id}`);
                if (targetIndex === currentIndex) {
                    return; // لا تفعل شيئًا إذا كانت النقطة هي نفسها المحددة حاليًا
                }
            
                // إزالة المحدد الحالي
                selectedImage.classList.remove("selected");
            
                // تحديد العنصر الجديد
                const targetElement = document.getElementById(targetId);
                targetElement.classList.add("selected");
            
                // تحديث النقاط
                app.carousel.updateDots();
            };
            app.carousel.init();
        })();
    });
</script>
{% endblock %}