{% load static %}
<!-- start header -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<div class="scroll">
    <div class="above-header">
        <div class="container">
            <div class="social-above-header">
                <div class="links">
                    <a href="mailto:info@csr-yemen.com" class="email"><i
                        class="fa-solid fa-envelope my-env foot-i" target="_blank"></i></a>
                        <a href="https://x.com/csrYemen" target="_blank"><i class="fa-brands fa-x-twitter"></i></a>
                        <a href="https://api.whatsapp.com/send?phone=783222270"><i
                            class="fa-brands fa-whatsapp foot-i" target="_blank"></i></a>
                            <a href="https://t.me/constituenttele" target="_blank"><i class="fab fa-telegram"></i></a>
                            <a href="https://www.youtube.com/channel/UCnDXXEWOVbtYgwASbii_Frg" target="_blank"><i class="fab fa-youtube"></i></a>
                            
                            <a href="https://www.instagram.com/csryemen/" target="_blank"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.facebook.com/profile.php?id=61556721602912" target="_blank"><i
                                class="fa-brands fa-facebook foot-i"></i></a>
                                
                </div>
                <button id="toggleMode">
                    <img id="modeIcon" src="{% static 'imgs/night.svg' %}" alt="Mode Icon">
                </button>
            </div>  
            
        </div>
    </div>             
    <div class="header-container" style="background-color: white;">
        <div class="container nav">
            <header class="head-page">
                <a href="{% url 'index' %}"><img src="{% static 'imgs/LOGOS-01.png' %}" alt=""></a> 
                <div class="togg">
                    <i class="fas fa-bars toggle-menu"></i>
                    <ul class="js">
                        <li><a href="{% url 'index' %}" 
                            {% if '/' == request.path %}
                            class="active nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >الرئيسية</a></li>
                        <li class="base-li aside-base-li"><a href="#"
                            {% if 'about' in request.path or '/criteria' in request.path %}
                            class="active js-a nav-a"
                            {% else %}
                            class="js-a nav-a"
                            {% endif %}
                            >معلومات المركز </a>
                            <ul class="ul">
                                <li><a href="{% url 'about' %}">من نحن</a></li>
                                <li><a href="{% url 'criteria' %}">معايير النشر</a></li>  
                            </ul>
                        </li>
                        <li class="base-li aside-base-li"><a href="{% url 'studies' %}"
                            {% if 'articles' in request.path or '/OsusArticles/articales' in request.path or 'showDetailStudies' in request.path or 'showDetailPatrols' in request.path or 'pushStudyPost' in request.path or 'firstStudyPage' in request.path or 'administrativeReform' in request.path or 'reformMethodology' in request.path or 'NotesReform' in request.path or 'StudyOfUS' in request.path or 'StudySingapore' in request.path or 'StudyRwanda' in request.path or 'StudyChina' in request.path or 'MalaysiaStudy' in request.path or 'JordanStudy' in request.path or 'FeaturesOfAdministrativeReformInYemen' in request.path or 'ComprehensiveReform' in request.path or 'AdministrativeRaw' in request.path or 'AdministrativeReformTwo' in request.path or 'AdministrativeLawInYemen' in request.path or 'GlobalManagementReform' in request.path or 'FutureForReformingAdministrativeLawInYemen' in request.path or 'LegalReform' in request.path or 'EvolutionOfPublicAdministration' in request.path or 'GeneralAdministrationInYemen' in request.path or 'CurrentEconomicSituation' in request.path or 'theExistingSocialSituation' in request.path or 'TheBureaucraticApparatusOnAdministrativeReform' in request.path or 'PublicFinanceAndEconomicConstruction' in request.path or 'FinancialReformInCountries' in request.path  or 'FinancialReformInYemen' in request.path  or 'FutureOfFinancialReformInYemen' in request.path or 'PrivateSectorInYemen' in request.path  or 'RoleOfPrivateSectorInDevelopment' in request.path or 'FutureOfPrivateSectorInYemen' in request.path or 'Government' in request.path or 'implementingE-government' in request.path or 'GlobalExperiencesInEgovernment' in request.path or 'InformationCommunicationsTechnologyInYemen' in request.path or 'ImplementingEgovernmentInYemen' in request.path or 'FutureEGovernmentYemen' in request.path or 'JudiciaryInYemen' in request.path or 'JobsInYemen' in request.path or 'HygieneAndSolidWasteManagement' in request.path %}
                            class="active js-a nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >الدراسات</a>
                            <ul class="ul nested-list">
                                <li><a href="{% url 'studies' %}">دراسات وبحوث</a></li>
                                <li><a href="{% url 'journal_studies' %}">دراسات أسس</a></li>
                            </ul>
                        </li>    
                        <li class="base-li aside-base-li"><a href="{% url 'publications' %}"
                            {% if 'books' in request.path or 'journals' in request.path or 'publications' in request.path%}
                            class="active js-a nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >إصدارات المركز</a>
                            <ul class="ul nested-list">
                                <li><a href="{% url 'books' %}">الكتب</a></li>
                                <li><a href="{% url 'osus' %}">الدوريات</a></li>
                            </ul>
                        </li>       
                        <!-- <li><a href="{% url 'patrols' %}"
                            {% if 'patrols' in request.path or 'showDetailPatrols' in request.path or 'pushPatrolPost' in request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            >الدوريات</a>
                        </li> -->
                        
                        <li class="asid-li2"><a href="{% url 'infographs' %}"
                            {% if 'Infographic' in request.path or 'infograph' in request.path%}
                            class="active nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >أسس إنفوجراف</a></li>
                        
                            <li class="base-li asid-li3 aside-base-li"><a href="{% url 'signup' %}"
                                {% if 'signup' in request.path or 'signin' in request.path or 'logout' in request.path %}
                                class="active js-a nav-a"
                                {% else %}
                                class="js-a nav-a"
                                {% endif %}
                                >تسجيل عضوية</a>
                                <ul class="ul">
                                    <li style="display: none;"><a href="{% url 'signin' %}">تسجيل الدخول</a></li>
                                    <li><a href="{% url 'signin' %}">تسجيل الدخول</a></li>
                                    <li><a href="{% url 'logout' %}">تسجيل الخروج</a></li> 
                                </ul>
                            </li>
                        <li class="asid-li3"><a href="{% url 'contact' %}" 
                            {% if 'contact' in request.path %}
                            class="active nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >تواصل معنا</a></li>
                        <li class="asid-li3"><a href="{% url 'all_posts' %}"     
                            {% if not request.user.is_authenticated or not request.user.is_superuser %}
                            style="display: none;"
                            {% else %}
                            {% if 'all_posts' in request.path %}
                            class="active nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            {% endif %}
                            >المنشورات</a></li>
                    </ul>
                </div>
                <div class="search-header tab">
                    <form action="{% url 'studies' %}" method="get" class="search-form">
                        <input type="text" name="q" placeholder="ادخل كلمة للبحث">
                        <button type="submit" class="search"><i class="fas fa-search"></i></button>
                    </form>
                </div>
                
                <!-- overlay -->
                <div class="over"></div>
                <!-- overlay -->
                <!-- aside bar -->
                <div class="aside">
                    <ul class="aside-ul">
                        <li><a href="{% url 'index' %}" 
                            {% if '/' == request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            >الرئيسية</a></li>
                        <li><a href="{% url 'about' %}"
                            {% if 'about' in request.path or '/criteria' in request.path %}
                            class="active js-a"
                            {% else %}
                            class="js-a"
                            {% endif %}
                            >معلومات المركز</a>
                            <ul class="ul aside-nested-list">
                                <li><a href="{% url 'about' %}">عن المركز</a></li>
                                <li><a href="{% url 'criteria' %}">معايير النشر</a></li>
                            </ul>
                        </li>
                        <li><a href="{% url 'studies' %}" 
                            {% if 'articles' in request.path or 'showDetailStudies' in request.path or 'showDetailPatrols' in request.path or 'pushStudyPost' in request.path or 'firstStudyPage' in request.path or 'administrativeReform' in request.path or 'reformMethodology' in request.path or 'NotesReform' in request.path or 'StudyOfUS' in request.path or 'StudySingapore' in request.path or 'StudyRwanda' in request.path or 'StudyChina' in request.path or 'MalaysiaStudy' in request.path or 'JordanStudy' in request.path or 'FeaturesOfAdministrativeReformInYemen' in request.path or 'ComprehensiveReform' in request.path or 'AdministrativeRaw' in request.path or 'AdministrativeReformTwo' in request.path or 'AdministrativeLawInYemen' in request.path or 'GlobalManagementReform' in request.path or 'FutureForReformingAdministrativeLawInYemen' in request.path or 'LegalReform' in request.path or 'EvolutionOfPublicAdministration' in request.path or 'GeneralAdministrationInYemen' in request.path or 'CurrentEconomicSituation' in request.path or 'theExistingSocialSituation' in request.path or 'TheBureaucraticApparatusOnAdministrativeReform' in request.path or 'PublicFinanceAndEconomicConstruction' in request.path or 'FinancialReformInCountries' in request.path  or 'FinancialReformInYemen' in request.path  or 'FutureOfFinancialReformInYemen' in request.path or 'PrivateSectorInYemen' in request.path  or 'RoleOfPrivateSectorInDevelopment' in request.path or 'FutureOfPrivateSectorInYemen' in request.path or 'Government' in request.path or 'implementingE-government' in request.path or 'GlobalExperiencesInEgovernment' in request.path or 'InformationCommunicationsTechnologyInYemen' in request.path or 'ImplementingEgovernmentInYemen' in request.path or 'FutureEGovernmentYemen' in request.path%}
                            class="active nav-a"
                            {% else %}
                            class="nav-a"
                            {% endif %}
                            >دراسات وبحوث</a></li>   
                        <li><a href="{% url 'studies' %}"
                            {% if 'articles' in request.path or 'journalArticles' in request.path or 'showDetailStudies' in request.path or 'showDetailPatrols' in request.path or 'pushStudyPost' in request.path or 'firstStudyPage' in request.path or 'administrativeReform' in request.path or 'reformMethodology' in request.path or 'NotesReform' in request.path or 'StudyOfUS' in request.path or 'StudySingapore' in request.path or 'StudyRwanda' in request.path or 'StudyChina' in request.path or 'MalaysiaStudy' in request.path or 'JordanStudy' in request.path or 'FeaturesOfAdministrativeReformInYemen' in request.path or 'ComprehensiveReform' in request.path or 'AdministrativeRaw' in request.path or 'AdministrativeReformTwo' in request.path or 'AdministrativeLawInYemen' in request.path or 'GlobalManagementReform' in request.path or 'FutureForReformingAdministrativeLawInYemen' in request.path or 'LegalReform' in request.path or 'EvolutionOfPublicAdministration' in request.path or 'GeneralAdministrationInYemen' in request.path or 'CurrentEconomicSituation' in request.path or 'theExistingSocialSituation' in request.path or 'TheBureaucraticApparatusOnAdministrativeReform' in request.path or 'PublicFinanceAndEconomicConstruction' in request.path or 'FinancialReformInCountries' in request.path  or 'FinancialReformInYemen' in request.path  or 'FutureOfFinancialReformInYemen' in request.path or 'PrivateSectorInYemen' in request.path  or 'RoleOfPrivateSectorInDevelopment' in request.path or 'FutureOfPrivateSectorInYemen' in request.path or 'Government' in request.path or 'implementingE-government' in request.path or 'GlobalExperiencesInEgovernment' in request.path or 'InformationCommunicationsTechnologyInYemen' in request.path or 'ImplementingEgovernmentInYemen' in request.path or 'FutureEGovernmentYemen' in request.path or 'JudiciaryInYemen' in request.path %}
                            class="active js-a"
                            {% else %}
                            class="js-a"
                            {% endif %}
                            >الدراسات</a>
                            <ul class="aside-ul aside-nested-list">
                                <li><a href="{% url 'studies' %}">دراسات وبحوث</a></li>
                                <li><a href="{% url 'journal_studies' %}">دراسات أسس</a></li>
                            </ul>
                        </li>
                        <li><a href="{% url 'publications' %}"
                            {% if 'books' in request.path or 'journals' in request.path or 'publications' in request.path %}
                            class="active js-a"
                            {% else %}
                            class="js-a"
                            {% endif %}
                            >إصدارات المركز</a>
                            <ul class="aside-ul aside-nested-list">
                                <li><a href="{% url 'books' %}">الكتب</a></li>
                                <li><a href="{% url 'osus' %}">الدوريات</a></li>
                            </ul>
                        </li>
                        <li class="asid-li small-screen"><a href="{% url 'infographs' %}"
                            {% if 'Infographic' in request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            >أسس إنفوجراف</a></li>
                        <!-- <li class="asid-li small-screen"><a href="{% url 'signup' %}" 
                            {% if request.user.is_authenticated %}
                            style="display: none;"
                            {% else %}
                            {% if 'signup' in request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            {% endif %}
                            >تسجيل عضوية</a></li> -->
                            <li class="mobile-li"><a href="{% url 'signup' %}"
                                {% if 'signup' in request.path or 'signin' in request.path or 'logout' in request.path %}
                                class="active js-a nav-a"
                                {% else %}
                                class="js-a nav-a"
                                {% endif %}
                                >تسجيل عضوية</a>
                                <ul class="aside-ul aside-nested-list">
                                    {% if request.user.is_authenticated %}
                                    <li style="display: none;"><a href="{% url 'signin' %}">تسجيل الدخول</a></li>
                                    {% else %}
                                    <li><a href="{% url 'signin' %}">تسجيل الدخول</a></li>
                                    {% endif %}
                                    {% if request.user.is_authenticated %}
                                    <li><a href="{% url 'logout' %}" class="logout-aside">تسجيل الخروج</a></li> 
                                    {% else %}
                                    <li style="display: none;"><a href="{% url 'logout' %}">تسجيل الخروج</a></li>
                                    {% endif %}
                                </ul>
                            </li>
                        <li class="asid-li small-screen2"><a href="{% url 'contact' %}" 
                            {% if 'contact' in request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            >تواصل معنا</a></li>
                        <li><a href="{% url 'all_posts' %}" 
                            {% if not request.user.is_authenticated or not request.user.is_superuser %}
                            style="display: none;"
                            {% else %}
                            {% if 'all_posts' in request.path %}
                            class="active"
                            {% else %}
                            class=""
                            {% endif %}
                            {% endif %}
                            >المنشورات</a></li>
                    </ul>
                    <div class="search-header phone">
                        <form action="{% url 'studies' %}" method="get" class="search-form phone">
                            <input type="text" name="q" placeholder="ادخل كلمة للبحث" class="phone">
                            <button type="submit" class="search phone"><i class="fas fa-search"></i></button>
                        </form>
                    </div>
                </div>
                
            </header>
        </div>
    </div>
</div>
<!-- end header -->
 <script>
    document.addEventListener('DOMContentLoaded', function () {
        const toggleButton = document.getElementById('toggleMode');
        const body = document.body;
        const firstPage = document.querySelector('.first-page');
        const modeIcon = document.getElementById('modeIcon');
        const contactLinks = document.querySelectorAll('.contactus a');

        // مسارات الصور باستخدام Django static
        const lightModeImg = "{% static 'imgs/light.svg' %}";
        const darkModeImg = "{% static 'imgs/night.svg' %}";

        // تحديد الوضع الافتراضي كـ light mode إذا لم يختر المستخدم وضعًا مسبقًا
        let savedMode = localStorage.getItem('theme');
        if (!savedMode) {
            savedMode = 'light-mode'; // الوضع الافتراضي هو الفاتح
            localStorage.setItem('theme', savedMode);
        }

        // تطبيق الوضع المحفوظ مع عكس الصور
        if (savedMode === 'dark-mode') {
            body.classList.add('dark-mode');
            if (firstPage) firstPage.classList.add('dark-mode');
            contactLinks.forEach(link => link.classList.add('dark-mode'));
            modeIcon.src = lightModeImg; // عرض أيقونة الوضع الفاتح
        } else {
            body.classList.remove('dark-mode');
            modeIcon.src = darkModeImg; // عرض أيقونة الوضع الليلي
            contactLinks.forEach(link => link.classList.remove('dark-mode'));
        }

        // تبديل الوضع عند النقر على الزر مع عكس الصور
        toggleButton.addEventListener('click', function () {
            if (body.classList.contains('dark-mode')) {
                // العودة للوضع الفاتح
                body.classList.remove('dark-mode');
                if (firstPage) firstPage.classList.remove('dark-mode');
                contactLinks.forEach(link => link.classList.remove('dark-mode'));
                localStorage.setItem('theme', 'light-mode');
                modeIcon.src = darkModeImg; // إظهار أيقونة الوضع الليلي
            } else {
                // الانتقال إلى الوضع الليلي
                body.classList.add('dark-mode');
                if (firstPage) firstPage.classList.add('dark-mode');
                contactLinks.forEach(link => link.classList.add('dark-mode'));
                localStorage.setItem('theme', 'dark-mode');
                modeIcon.src = lightModeImg; // إظهار أيقونة الوضع الفاتح
            }
        });



        let bar = document.querySelector(".toggle-menu");
        let aside_bar = document.querySelector('.aside');
        bar.onclick = function () {
            // إذا كان الـ aside يحتوي على الكلاس "show"، نقوم بإضافته الكلاس "hide" لبدء الانسحاب
            if (aside_bar.classList.contains('show')) {
                aside_bar.classList.add('hide');
                setTimeout(function() {
                    aside_bar.classList.remove('show', 'hide'); // إزالة الكلاس بعد الانتقال
                }, 900);  // تأخير إزالة الكلاسات بنفس وقت الانتقال
            } else {
                // إذا لم يكن الـ aside يحتوي على الكلاس "show"، نقوم بإضافته لإظهاره
                aside_bar.classList.add('show');
            }
        }
        
        document.body.addEventListener("click", function (e) {
            // إذا تم النقر على شيء غير الأيقونة أو الـ aside، نقوم بإخفاء الـ aside
            if (!e.target.classList.contains('toggle-menu') && !e.target.classList.contains('phone') && !e.target.closest('.aside')) {
                aside_bar.classList.add('hide');
                setTimeout(function() {
                    aside_bar.classList.remove('show', 'hide');
                }, 900); // نفس التأخير
            }
        });
    });
    document.addEventListener("scroll", () => {
        const header = document.querySelector(".header-container");
        if (window.scrollY > 50) {
            header.classList.add("scrolled");
        } else {
            header.classList.remove("scrolled");
        }
    });
              
 </script>